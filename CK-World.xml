<?xml version="1.0" encoding="utf-8" ?>
<CK-World>

  <ReferentialFolder Path="CK-Env/CKli/Referential" />
  <SolutionCentral />
  <PublishedPackageFeeds />

  <KnownPackageVersions>
    <Package Name="Mono.Cecil" MinVersion="0.10.0" />
    <Package Name="Code.Cake" MinVersion="0.25.0" />
    <Package Name="FluentAssertions" Version="5.2.0" />
    <Package Name="NUnit" Version="2.6.4" Frameworks="net461" />
    <Package Name="NUnitLite" Version="3.10.1" Frameworks="netstandard2.0;netcoreapp2.0" />
    <Package Name="NUnit" MinVersion="3.10.1" Frameworks="netstandard2.0;netcoreapp2.0" />
  </KnownPackageVersions>

  <KnownPackageDependencies>
    <Package Name="Code.Cake" Requires="Cake.Core;Cake.Common" />
    <Package Name="CK.Testing" Requires="FluentAssertions" />
    <Package Name="CK.Testing.Monitoring" Requires="CK.Testing" />
  </KnownPackageDependencies>

  <GitStatusAction Title="Displays statuses of all the repositories." />
  <GitCheckoutAction Title="Checkout all repositories on a specific branch name." />
  <GitCommitAction Title="Commits all pending changes to the current branch of all the repositories." />
  <GitFetchAction Title="Fetches all remotes in all repositories." />
  <GitPushAction Title="Pushes all current branches to their tracked remote." />
  <GlobalDependencyAction Title="Solutions &amp; Projects management." />
  <GlobalSwitchBranchAction Title="Switch between 'develop-blank' &lt;=&gt; 'develop' branches." />
  <GlobalCIBuildAction Title="CI Build: Build all Solutions in develop to CI packages, optionally pushing them to MyGet invenietis-ci feed." />
  <GlobalBlankBuildAction Title="Blank build: Build all Solutions locally in 'develop-local' branch." />
  
  <!-- Unsafe brutal tools.
    
    <LaunchSettingsUpdateNugetExePathAction Title="Update nunit.exe path in launchSettings.json files." />
    <RemoveXmlHeaderFromCSProjAction Title="Removes xml namespace from .csproj, .props and .proj files." />

-->

  <Reusable Name="CodeCakeBuilder">
    <Folder Name="CodeCakeBuilder">
      <MustExist InitialContent="InitialCodeCakeBuilder" />
      <Region Title="Removing files and folders that should not more exist.">
        <Folder Name="Properties">
          <MustNotExist />
        </Folder>
        <Folder Name="Tools">
          <MustNotExist />
        </Folder>
        <File Name="App.config">
          <MustNotExist />
        </File>
        <File Name="CoreBuild.proj">
          <MustNotExist />
        </File>
        <File Name="Bootstrap.ps1">
          <MustNotExist />
        </File>
        <File Name="BootstrapAndBuild.ps1">
          <MustNotExist />
        </File>
        <File Name="packages.config">
          <MustNotExist />
        </File>
      </Region>
      <File Name="CodeCakeBuilder.csproj">
        <MustExist InitialContent="InitialCodeCakeBuilder/CodeCakeBuilder.csproj" />
      </File>
      <File Name="RepositoryInfo.xsd">
        <MustExist Content="InitialCodeCakeBuilder/RepositoryInfo.xsd" />
      </File>
      <File Name="Program.cs">
        <MustExist Content="InitialCodeCakeBuilder/Program.cs" />
      </File>
      <File Name="Build.cs">
        <MustExist InitialContent="InitialCodeCakeBuilder/Build.cs" >
          <FileTransform>
            <TextReplace Text="$Solution Name$" SourceXPath="ancestor::Folder[1]" SourcePropertyName="Name" />
          </FileTransform>
        </MustExist>
      </File>
      <File Name="Build.StandardCheckRepository.cs">
        <MustExist Content="InitialCodeCakeBuilder/Build.StandardCheckRepository.cs" />
      </File>
      <File Name="Build.StandardSolutionBuild.cs">
        <MustExist Content="InitialCodeCakeBuilder/Build.StandardSolutionBuild.cs" />
      </File>
      <File Name="Build.StandardUnitTests.cs">
        <MustExist Content="InitialCodeCakeBuilder/Build.StandardUnitTests.cs" />
      </File>
      <File Name="Build.StandardCreateNuGetPackages.cs">
        <MustExist Content="InitialCodeCakeBuilder/Build.StandardCreateNuGetPackages.cs" />
      </File>
      <File Name="Build.StandardPushNuGetPackages.cs">
        <MustExist Content="InitialCodeCakeBuilder/Build.StandardPushNuGetPackages.cs" />
      </File>
    </Folder>
  </Reusable>

  <Reusable Name="StandardFiles">
    <MustExist />
    <Reuse Name="CodeCakeBuilder" />
    <File Name="NuGet.config">
      <MustExist Content="SimpleFiles/NuGet.config"/>
    </File>
    <File Name=".editorconfig">
      <MustExist Content="SimpleFiles/.editorconfig"/>
    </File>
    <Folder Name="Common">
      <MustExist />
      <File Name="SharedKey.snk">
        <MustExist Content="SimpleFiles/SharedKey.snk"/>
      </File>
    </Folder>
  </Reusable>

  <Reusable Name="StandardPrimarySolution" >
    <PrimarySolution>
      <TestProjectsStandardConventions />
    </PrimarySolution>
  </Reusable>

  <!--Use attribute SkipRun="True" to skip running runnable items.-->
  <Folder Name="CK-AspNet-Projects">

    <GitFolder Name="CK-AspNet" Url="https://github.com/Invenietis/CK-AspNet.git" >
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-AspNet-Auth" Url="https://github.com/Invenietis/CK-AspNet-Auth.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile SqlServer="2016" />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-AspNet-Tester" Url="https://github.com/Invenietis/CK-AspNet-Tester.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

  </Folder>

  <Folder Name="CK-Core-Projects">

    <GitFolder Name="CK-ActivityMonitor" Url="https://github.com/Invenietis/CK-ActivityMonitor.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Auth-Abstractions" Url="https://github.com/Invenietis/CK-Auth-Abstractions.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Core" Url="https://github.com/Invenietis/CK-Core.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Monitoring" Url="https://github.com/Invenietis/CK-Monitoring.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Reflection" Url="https://github.com/Invenietis/CK-Reflection.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Testing" Url="https://github.com/Invenietis/CK-Testing.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile SqlServer="2016" />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Text" Url="https://github.com/Invenietis/CK-Text.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-WeakAssemblyNameResolver" Url="https://github.com/Invenietis/CK-WeakAssemblyNameResolver.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles">
          <Remove Target="Folder[@Name='CodeCakeBuilder']/File[@Name='Build.StandardUnitTests.cs']" />
        </Reuse>
        <AppVeyorFile />
      </Branch>
    </GitFolder>

  </Folder>

  <Folder Name="CK-Database-Projects">

    <GitFolder Name="CK-CodeGen" Url="https://github.com/Invenietis/CK-CodeGen.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Database" Url="https://olivier_spinelli@bitbucket.org/olivier_spinelli/ck-database.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile SqlServer="2016" PushToRemoteStore="True" />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-DB" Url="https://github.com/Invenietis/CK-DB.git">
      <Branch Name="develop">
        <PrimarySolution TestProjectsArePublished="True">
          <TestProjectsStandardConventions />
        </PrimarySolution>
        <SecondarySolution Path="IntegrationTests/IntegrationTests.sln" SpecialType="IncludedSecondarySolution">
          <TestProjectsStandardConventions />
        </SecondarySolution>
        <Reuse Name="StandardFiles" />
        <AppVeyorFile SqlServer="2016" PushToRemoteStore="True" />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Setup" Url="https://olivier_spinelli@bitbucket.org/olivier_spinelli/ck-setup.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile PushToRemoteStore="True" />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Setup-Dependency" Url="https://github.com/Invenietis/CK-Setup-Dependency.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CKSetupRemoteStore" Url="https://olivier_spinelli@bitbucket.org/olivier_spinelli/cksetupremotestore.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-Sqlite" Url="https://github.com/Invenietis/CK-Sqlite.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile PushToRemoteStore="True" />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-SqlServer-Parser" Url="https://olivier_spinelli@bitbucket.org/olivier_spinelli/ck-sqlserver-parser.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CK-SqlServer-Parser-Model" Url="https://olivier_spinelli@bitbucket.org/olivier_spinelli/ck-sqlserver-parser-model.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles">
          <Remove Target="Folder[@Name='CodeCakeBuilder']/File[@Name='Build.StandardUnitTests.cs']" />
        </Reuse>
        <AppVeyorFile />
      </Branch>
    </GitFolder>

  </Folder>

  <Folder Name="Yodii-Projects">

    <GitFolder Name="Yodii-Script" Url="https://github.com/Invenietis/yodii-script.git">
      <Branch Name="develop">
        <Reuse Name="StandardPrimarySolution" />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

  </Folder>

  <Folder Name="SimpleGitVersion">

    <GitFolder Name="CodeCake" Url="https://github.com/SimpleGitVersion/CodeCake.git">
      <Branch Name="develop">
        <PrimarySolution />
        <Reuse Name="StandardFiles">
          <Remove Target="Folder[@Name='CodeCakeBuilder']/File[@Name='Build.StandardUnitTests.cs']" />
          <Remove Target="Folder[@Name='Common']/File[@Name='SharedKey.snk']" />
        </Reuse>
        <AppVeyorFile />
      </Branch>
    </GitFolder>

    <GitFolder Name="CSemVer-Net" Url="https://github.com/SimpleGitVersion/CSemVer-Net.git">
      <Branch Name="develop">
        <PrimarySolution />
        <Reuse Name="StandardFiles" />
        <AppVeyorFile />
      </Branch>
    </GitFolder>

  </Folder>

  <File Name="CK-World">
    <MustExist Content="SimpleFiles/CK-World"/>
  </File>

</CK-World>
